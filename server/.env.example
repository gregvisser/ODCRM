# Azure App Service Environment Variables
# Copy this file to .env for local development
# In production (Azure App Service), set these in the Azure Portal

# Database Configuration
# Format: postgresql://username:password@host:port/database?sslmode=require
DATABASE_URL=postgresql://odcrmadmin:YourPassword@odcrm-postgres.postgres.database.azure.com:5432/postgres?sslmode=require

# Application Environment
NODE_ENV=production
PORT=8080

# Frontend URLs for CORS (comma-separated)
FRONTEND_URL=https://odcrm.bidlow.co.uk
FRONTEND_URLS=https://odcrm.bidlow.co.uk

# Microsoft Azure AD / Entra ID Authentication
MICROSOFT_CLIENT_ID=your-client-id-from-azure-ad
MICROSOFT_CLIENT_SECRET=your-client-secret-from-azure-ad
MICROSOFT_TENANT_ID=common
REDIRECT_URI=https://odcrm-api.azurewebsites.net/api/outlook/callback

# Email Tracking Domain (used for tracking pixels and links)
EMAIL_TRACKING_DOMAIN=https://odcrm-api.azurewebsites.net

# External API Keys (keep secure - set in Azure Portal, not here)
OPENAI_API_KEY=your-openai-api-key
CLEARBIT_API_KEY=your-clearbit-api-key
GOOGLE_GEMINI_API_KEY=your-gemini-api-key

# FREE enrichment pipeline (no paid services)
# Companies House API (FREE)
COMPANIES_HOUSE_API_KEY=
# Crawler user agent for all enrichment HTTP requests
ENRICHMENT_USER_AGENT=ODCRM-EnrichmentBot/1.0
# Maximum pages to crawl per website
ENRICHMENT_MAX_PAGES=6

# Worker Configuration
LEADS_SYNC_DISABLED=false
LEADS_SYNC_CRON=*/10 * * * *

ABOUT_ENRICHMENT_DISABLED=false
ABOUT_ENRICHMENT_CRON=0 2 * * *

EMAIL_WORKERS_DISABLED=true

# Email Sender Configuration
SENDER_BATCH_SIZE=25
SENDER_LOCK_MINUTES=5
MAILBOX_DAILY_CAP=50
MAILBOX_SPREAD_HOURS=10

# Admin API Secret (for diagnostic endpoints like /api/admin/persistence-test)
# Generate a secure random string: openssl rand -base64 32
# Azure App Service setting name: ADMIN_SECRET
ADMIN_SECRET=your-secure-admin-secret-here

# Development overrides (only used in NODE_ENV !== 'production')
# In production, these should be set via environment variables